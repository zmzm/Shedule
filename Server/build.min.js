/* Server 0.0.1 - 2015-04-24 */
var express=require("express"),path=require("path"),bodyParser=require("body-parser"),app=express(),Shedule=require("./shedule/Shedule");app.use(bodyParser.json()),app.use(bodyParser.urlencoded()),app.use(express["static"](path.join(__dirname,"public"))),app.use(function(a,b,c){b.status(404),console.log("Not found URL: %s",a.url),b.send({error:"Not found"})}),app.use(function(a,b,c,d){c.status(a.status||500),console.log("Internal error(%d): %s",c.statusCode,a.message),c.send({error:a.message})}),app.get("/api",function(a,b){b.send("API is running")}),app.get("/api/shedule",function(a,b){Shedule.getShedule(function(a){b.header("Access-Control-Allow-Origin","*"),b.header("Access-Control-Allow-Headers","X-Requested-With"),b.status(200),b.send(a)})}),app.listen(3e3,function(){console.log("Express server listening on port")});